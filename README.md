# ComfyUI Gaussian Preview

ComfyUI è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç”¨äº**é¢„è§ˆå’Œå½•åˆ¶** 3D é«˜æ–¯ç‚¹äº‘ï¼ˆGaussian Splattingï¼‰æ¨¡å‹ã€‚
### å¯é«˜åˆ†è¾¨ç‡å½•åˆ¶è§†é¢‘
> **æ³¨æ„**ï¼šæ­¤èŠ‚ç‚¹æ˜¯ä» [ComfyUI-GeometryPack](https://github.com/PozzettiAndrea/ComfyUI-GeometryPack) ä¸­æå–çš„é¢„è§ˆåŠŸèƒ½ï¼Œç»è¿‡ä¼˜åŒ–å¹¶å¢åŠ äº†**è§†é¢‘å½•åˆ¶**åŠŸèƒ½ã€‚ä¸»è¦ç”¨äºé¢„è§ˆå„ç§æ¥æºç”Ÿæˆçš„é«˜æ–¯ 3D æ¨¡å‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº ComfyUI-Sharp ç­‰å·¥å…·ç”Ÿæˆçš„é«˜æ–¯ç‚¹äº‘ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ **äº¤äº’å¼ 3D é¢„è§ˆ**ï¼šä½¿ç”¨ gsplat.js åœ¨æµè§ˆå™¨ä¸­å®æ—¶æ¸²æŸ“é«˜æ–¯ç‚¹äº‘
- ğŸ¥ **è§†é¢‘å½•åˆ¶**ï¼šæ”¯æŒå½•åˆ¶é¢„è§ˆçª—å£ä¸º MP4 è§†é¢‘ï¼ˆæœ€é«˜ 4096px å®½åº¦ï¼‰- **æ–°å¢åŠŸèƒ½**
- ğŸ“ **ç›¸æœºå‚æ•°æ”¯æŒ**ï¼šè‡ªåŠ¨æ ¹æ® extrinsics å’Œ intrinsics è®¾ç½®åˆå§‹è§†è§’
- ğŸ›ï¸ **å¯è°ƒé¢„è§ˆå°ºå¯¸**ï¼šæ”¯æŒè‡ªå®šä¹‰é¢„è§ˆçª—å£å®½åº¦ï¼ˆ256-4096pxï¼‰ï¼Œå½±å“å½•åˆ¶åˆ†è¾¨ç‡
- ğŸ”„ **åŠ¨æ€ç¼©æ”¾**ï¼šæ”¯æŒå®æ—¶è°ƒæ•´é«˜æ–¯ç‚¹äº‘çš„æ˜¾ç¤ºæ¯”ä¾‹
- ğŸ“¸ **é‡ç½®è§†è§’**ï¼šä¸€é”®é‡ç½®åˆ°åˆå§‹ç›¸æœºè§†è§’
- âš¡ **ä¼˜åŒ–æ€§èƒ½**ï¼šç§»é™¤äº†ä¸å¿…è¦çš„åŠŸèƒ½ï¼Œä¸“æ³¨äºé¢„è§ˆå’Œå½•åˆ¶ä½“éªŒ

## å®‰è£…

1. å°†æœ¬ä»“åº“å…‹éš†åˆ° ComfyUI çš„ `custom_nodes` ç›®å½•ï¼š

```bash
cd ComfyUI/custom_nodes
git clone https://github.com/your-username/ComfyUI-gaussian_preview.git
```

2. æ­¤èŠ‚ç‚¹æ”¯æŒä»»ä½•ç”Ÿæˆ PLY æ ¼å¼é«˜æ–¯ç‚¹äº‘çš„å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
   - [ComfyUI-Sharp](https://github.com/PozzettiAndrea/ComfyUI-Sharp)
   - [ComfyUI-GeometryPack](https://github.com/PozzettiAndrea/ComfyUI-GeometryPack)
   - å…¶ä»–ç”Ÿæˆé«˜æ–¯ç‚¹äº‘çš„å·¥å…·

3. é‡å¯ ComfyUI

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

1. ä½¿ç”¨ä»»ä½•æ”¯æŒçš„å·¥å…·ç”Ÿæˆ PLY æ ¼å¼çš„é«˜æ–¯ç‚¹äº‘æ–‡ä»¶ï¼š
   - **ComfyUI-Sharp** çš„ `SHARP Predict` èŠ‚ç‚¹
   - **ComfyUI-GeometryPack** çš„ç›¸å…³èŠ‚ç‚¹
   - å…¶ä»–ç”Ÿæˆé«˜æ–¯ç‚¹äº‘çš„å·¥å…·
2. å°† PLY æ–‡ä»¶è·¯å¾„è¿æ¥åˆ° `Preview Gaussian` èŠ‚ç‚¹çš„ `ply_path` è¾“å…¥
3. ï¼ˆå¯é€‰ï¼‰è¿æ¥ `extrinsics` å’Œ `intrinsics` å‚æ•°ä»¥è®¾ç½®æ­£ç¡®çš„åˆå§‹è§†è§’
4. æ‰§è¡ŒèŠ‚ç‚¹ï¼Œé¢„è§ˆçª—å£å°†æ˜¾ç¤º 3D é«˜æ–¯ç‚¹äº‘

### èŠ‚ç‚¹å‚æ•°

#### å¿…éœ€å‚æ•°
- **ply_path** (STRING): é«˜æ–¯ç‚¹äº‘ PLY æ–‡ä»¶çš„è·¯å¾„

#### å¯é€‰å‚æ•°
- **extrinsics** (EXTRINSICS): 4x4 ç›¸æœºå¤–å‚çŸ©é˜µï¼Œç”¨äºè®¾ç½®åˆå§‹è§†è§’
- **intrinsics** (INTRINSICS): 3x3 ç›¸æœºå†…å‚çŸ©é˜µï¼Œç”¨äºè®¾ç½®è§†åœºè§’ï¼ˆFOVï¼‰
- **preview_width** (INT): é¢„è§ˆçª—å£å®½åº¦ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤ 512
  - èŒƒå›´ï¼š256-4096
  - æ­¥é•¿ï¼š64
  - **æ³¨æ„**ï¼šæ­¤å‚æ•°ç›´æ¥å½±å“è§†é¢‘å½•åˆ¶çš„åˆ†è¾¨ç‡

### æ§åˆ¶åŠŸèƒ½

é¢„è§ˆçª—å£åº•éƒ¨æä¾›ä»¥ä¸‹æ§åˆ¶ï¼š

- **Scale**: è°ƒæ•´é«˜æ–¯ç‚¹äº‘çš„æ˜¾ç¤ºæ¯”ä¾‹ï¼ˆ0.01-100ï¼‰
- **Reset View**: é‡ç½®ç›¸æœºåˆ°åˆå§‹è§†è§’
- **Max (s)**: è®¾ç½®æœ€å¤§å½•åˆ¶æ—¶é•¿ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 30 ç§’
- **Start Record**: å¼€å§‹å½•åˆ¶è§†é¢‘ï¼ˆMP4 æ ¼å¼ï¼‰

### è§†é¢‘å½•åˆ¶

1. è°ƒæ•´é¢„è§ˆçª—å£åˆ°æ»¡æ„çš„è§†è§’
2. è®¾ç½®æœ€å¤§å½•åˆ¶æ—¶é•¿ï¼ˆMax (s)ï¼‰
3. ç‚¹å‡» "Start Record" å¼€å§‹å½•åˆ¶
4. å½•åˆ¶å®Œæˆåï¼Œè§†é¢‘ä¼šè‡ªåŠ¨ä¿å­˜åˆ° ComfyUI è¾“å‡ºç›®å½•
5. è§†é¢‘è·¯å¾„ä¼šé€šè¿‡èŠ‚ç‚¹çš„ `video_path` è¾“å‡ºç«¯å£è¿”å›

**å½•åˆ¶åˆ†è¾¨ç‡è¯´æ˜**ï¼š
- å½•åˆ¶åˆ†è¾¨ç‡ = é¢„è§ˆçª—å£çš„å®é™…æ˜¾ç¤ºå°ºå¯¸
- é¢„è§ˆçª—å£å®½åº¦ç”± `preview_width` å‚æ•°æ§åˆ¶
- é«˜åº¦æ ¹æ®å›¾åƒå®½é«˜æ¯”è‡ªåŠ¨è®¡ç®—
- å»ºè®®è®¾ç½®ï¼š512pxï¼ˆé»˜è®¤ï¼‰ã€768pxã€1024pxã€1920px ç­‰

## ä¸é«˜æ–¯ç‚¹äº‘ç”Ÿæˆå·¥å…·é›†æˆ

æ­¤èŠ‚ç‚¹è®¾è®¡ç”¨äºä¸å¤šç§é«˜æ–¯ç‚¹äº‘ç”Ÿæˆå·¥å…·é…åˆä½¿ç”¨ï¼š

### ä¸ ComfyUI-Sharp é›†æˆ
```
[Load Image] â†’ [SHARP Predict] â†’ [Preview Gaussian]
                                    â†“
                              [video_path è¾“å‡º]
```

### ä¸ ComfyUI-GeometryPack é›†æˆ
```
[ç›¸å…³å‡ ä½•èŠ‚ç‚¹] â†’ [é«˜æ–¯ç‚¹äº‘ç”Ÿæˆ] â†’ [Preview Gaussian]
                                      â†“
                                [video_path è¾“å‡º]
```

### å®Œæ•´å·¥ä½œæµç¤ºä¾‹

1. ä½¿ç”¨ `Load Image with EXIF` æˆ– `Load Image` åŠ è½½å›¾åƒ
2. ä½¿ç”¨æ”¯æŒçš„å·¥å…·ç”Ÿæˆé«˜æ–¯ç‚¹äº‘ï¼ˆPLY æ–‡ä»¶ï¼‰ï¼š
   - `SHARP Predict` èŠ‚ç‚¹ï¼ˆComfyUI-Sharpï¼‰
   - ComfyUI-GeometryPack ä¸­çš„ç›¸å…³èŠ‚ç‚¹
   - å…¶ä»–é«˜æ–¯ç‚¹äº‘ç”Ÿæˆå·¥å…·
3. å°† PLY æ–‡ä»¶è·¯å¾„å’Œç›¸æœºå‚æ•°è¿æ¥åˆ° `Preview Gaussian` èŠ‚ç‚¹
4. åœ¨é¢„è§ˆçª—å£ä¸­æŸ¥çœ‹å’Œè°ƒæ•´è§†è§’
5. å½•åˆ¶è§†é¢‘å¹¶è·å–è¾“å‡ºè·¯å¾„

## æŠ€æœ¯ç»†èŠ‚

- **æ¸²æŸ“å¼•æ“**ï¼šgsplat.jsï¼ˆWebGL åŠ é€Ÿï¼‰
- **è§†é¢‘æ ¼å¼**ï¼šMP4 (H.264)
- **å½•åˆ¶å¸§ç‡**ï¼š30 FPS
- **è§†é¢‘æ¯”ç‰¹ç‡**ï¼š5 Mbps
- **æ”¯æŒæµè§ˆå™¨**ï¼šChromeã€Firefoxã€Edgeã€Safari

## ä¾èµ–é¡¹

- ComfyUI
- ä»»ä½•æ”¯æŒç”Ÿæˆ PLY æ ¼å¼é«˜æ–¯ç‚¹äº‘çš„å·¥å…·ï¼ˆå¯é€‰ï¼‰ï¼š
  - [ComfyUI-Sharp](https://github.com/PozzettiAndrea/ComfyUI-Sharp)
  - [ComfyUI-GeometryPack](https://github.com/PozzettiAndrea/ComfyUI-GeometryPack)
  - å…¶ä»–é«˜æ–¯ç‚¹äº‘ç”Ÿæˆå·¥å…·

## æ³¨æ„äº‹é¡¹

1. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼šè§†é¢‘å½•åˆ¶åŠŸèƒ½éœ€è¦æµè§ˆå™¨æ”¯æŒ `MediaRecorder` API
2. **æ€§èƒ½**ï¼šè¾ƒå¤§çš„é¢„è§ˆçª—å£ï¼ˆ>1920pxï¼‰å¯èƒ½ä¼šå½±å“æ¸²æŸ“æ€§èƒ½
3. **å†…å­˜**ï¼šå½•åˆ¶é•¿æ—¶é—´è§†é¢‘ä¼šæ¶ˆè€—è¾ƒå¤šå†…å­˜
4. **ç›¸æœºå‚æ•°**ï¼šæä¾›æ­£ç¡®çš„ intrinsics å’Œ extrinsics å¯ä»¥è·å¾—æ›´å¥½çš„åˆå§‹è§†è§’

## è®¸å¯è¯

GPL-3.0-or-later

## é¡¹ç›®å†å²

æ­¤é¡¹ç›®æ˜¯ä» [ComfyUI-GeometryPack](https://github.com/PozzettiAndrea/ComfyUI-GeometryPack) ä¸­æå–çš„é¢„è§ˆåŠŸèƒ½ï¼Œç»è¿‡ä»¥ä¸‹ä¼˜åŒ–ï¼š

- ç§»é™¤äº†ä¸å¿…è¦çš„åŠŸèƒ½ï¼Œä¸“æ³¨äºé¢„è§ˆä½“éªŒ
- æ–°å¢è§†é¢‘å½•åˆ¶åŠŸèƒ½
- ä¼˜åŒ–äº†ç”¨æˆ·ç•Œé¢å’Œäº¤äº’ä½“éªŒ
- æå‡äº†æ€§èƒ½å’Œç¨³å®šæ€§

## è‡´è°¢

- [ComfyUI-GeometryPack ä»“åº“](https://github.com/PozzettiAndrea/ComfyUI-GeometryPack) - åŸå§‹é¡¹ç›®
- [ComfyUI-Sharp ä»“åº“](https://github.com/PozzettiAndrea/ComfyUI-Sharp)
- [Apple SHARP](https://github.com/apple/ml-sharp)
